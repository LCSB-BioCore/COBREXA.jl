<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parallel processing overview · COBREXA.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="COBREXA.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="COBREXA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">COBREXA.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../quickstart/">COBREXA.jl in 10 minutes</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/">Contents</a></li><li><a class="tocitem" href="../../examples/01_loading/">Loading models</a></li><li><a class="tocitem" href="../../examples/02_convert_save/">Converting, modifying and saving models</a></li><li><a class="tocitem" href="../../examples/03_exploring/">Exploring model contents</a></li><li><a class="tocitem" href="../../examples/03b_accessors/">Generic accessors</a></li><li><a class="tocitem" href="../../examples/04_core_model/"><code>CoreModel</code> usage</a></li><li><a class="tocitem" href="../../examples/04_standardmodel/">Basic usage of <code>StandardModel</code></a></li><li><a class="tocitem" href="../../examples/04b_standardmodel_construction/">Model construction and modification</a></li><li><a class="tocitem" href="../../examples/05a_fba/">Flux balance analysis (FBA)</a></li><li><a class="tocitem" href="../../examples/05b_fba_mods/">Extending FBA with modifications</a></li><li><a class="tocitem" href="../../examples/06_fva/">Flux variability analysis (FVA)</a></li><li><a class="tocitem" href="../../examples/07_gene_deletion/">Gene knockouts</a></li><li><a class="tocitem" href="../../examples/07_restricting_reactions/">Restricting and disabling individual reactions</a></li><li><a class="tocitem" href="../../examples/08_pfba/">Parsimonious flux balance analysis (pFBA)</a></li><li><a class="tocitem" href="../../examples/09_loopless/">Loopless FBA</a></li><li><a class="tocitem" href="../../examples/10_crowding/">FBA with crowding</a></li><li><a class="tocitem" href="../../examples/11_growth/">Growth media analysis</a></li><li><a class="tocitem" href="../../examples/12_mmdf/">Maximum-minimum driving force analysis</a></li><li><a class="tocitem" href="../../examples/13_moma/">Minimization of metabolic adjustment (MOMA)</a></li><li><a class="tocitem" href="../../examples/14_smoment/">sMOMENT</a></li><li><a class="tocitem" href="../../examples/15_gecko/">GECKO</a></li><li><a class="tocitem" href="../../examples/16_hit_and_run/">Hit and run sampling</a></li><li><a class="tocitem" href="../../examples/17_envelopes/">Production envelopes</a></li></ul></li><li><span class="tocitem">Parallel, distributed and HPC processing</span><ul><li><a class="tocitem" href="../">Contents</a></li><li class="is-active"><a class="tocitem" href>Parallel processing overview</a><ul class="internal"><li><a class="tocitem" href="#Functions-that-support-parallelization"><span>Functions that support parallelization</span></a></li><li><a class="tocitem" href="#Mitigating-parallel-inefficiencies"><span>Mitigating parallel inefficiencies</span></a></li></ul></li><li><a class="tocitem" href="../2_parallel/">Local parallel processing</a></li><li><a class="tocitem" href="../3_slurm/">Working in a HPC environment</a></li><li><a class="tocitem" href="../4_serialized/">Faster model distribution</a></li></ul></li><li><span class="tocitem">Core concepts guide</span><ul><li><a class="tocitem" href="../../concepts/">Contents</a></li><li><a class="tocitem" href="../../concepts/1_screen/">Screening many model variants</a></li><li><a class="tocitem" href="../../concepts/2_modifications/">Writing custom optimizer modifications</a></li><li><a class="tocitem" href="../../concepts/3_custom_models/">Working with custom models</a></li><li><a class="tocitem" href="../../concepts/4_wrappers/">Extending the models</a></li></ul></li><li><span class="tocitem">Reference (Functions and types)</span><ul><li><a class="tocitem" href="../../functions/">Contents</a></li><li><a class="tocitem" href="../../functions/analysis/">Analysis functions</a></li><li><a class="tocitem" href="../../functions/base/">Base functions</a></li><li><a class="tocitem" href="../../functions/io/">Input and output</a></li><li><a class="tocitem" href="../../functions/reconstruction/">Model construction functions</a></li><li><a class="tocitem" href="../../functions/types/">Types</a></li><li><a class="tocitem" href="../../functions/utils/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../howToContribute/">How to contribute</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Parallel, distributed and HPC processing</a></li><li class="is-active"><a href>Parallel processing overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parallel processing overview</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lcsb-biocore/COBREXA.jl/blob/master/docs/src/distributed/1_functions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Parallel-processing-overview"><a class="docs-heading-anchor" href="#Parallel-processing-overview">Parallel processing overview</a><a id="Parallel-processing-overview-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-processing-overview" title="Permalink"></a></h1><p>Distributed processing in Julia is represented mainly by the package <a href="https://docs.julialang.org/en/v1/stdlib/Distributed/"><code>Distributed.jl</code></a>.</p><p><code>COBREXA.jl</code> is able to utilize this existing system to almost transparently run the large parallelizable analyses on multiple CPU cores and multiple computers connected through the network. Ultimately, the approach scales to thousands of computing nodes in large HPC facilities.</p><p>You may run your analyses in parallel to gain speed-ups. The usual workflow in <code>COBREXA.jl</code> is quite straightforward:</p><ol><li>Import the <code>Distributed</code> package and add worker processes, e.g. using <code>addprocs</code>.</li><li>Pick an analysis function that can be parallelized (such as <a href="../../functions/analysis/#COBREXA.screen-Tuple"><code>screen</code></a> or <a href="../../functions/analysis/#COBREXA.flux_variability_analysis-Tuple{MetabolicModel, Any}"><code>flux_variability_analysis</code></a>) and prepare it to work on your data.</li><li>Pass the desired set of worker IDs to the function using <code>workers=</code> argument, in the simplest form using e.g. <code>screen(...,  workers=workers())</code>.</li><li>Worker communication will be managed automatically, and you will get results &quot;as usual&quot;.</li></ol><p>Specific documentation is available about <a href="../2_parallel/">running parallel analysis locally</a> and <a href="../3_slurm/">running distributed analysis in HPC clusters</a>.</p><h2 id="Functions-that-support-parallelization"><a class="docs-heading-anchor" href="#Functions-that-support-parallelization">Functions that support parallelization</a><a id="Functions-that-support-parallelization-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-that-support-parallelization" title="Permalink"></a></h2><p>As of COBREXA 1.3, the list of functions that accept the <code>worker</code> argument is as follows:</p><ul><li><a href="../../functions/analysis/#COBREXA.affine_hit_and_run-Tuple{MetabolicModel, Matrix{Float64}}"><code>affine_hit_and_run</code></a> sampling, together with <a href="../../functions/analysis/#COBREXA.warmup_from_variability"><code>warmup_from_variability</code></a></li><li><a href="../../functions/analysis/#COBREXA.flux_variability_analysis-Tuple{MetabolicModel, Any}"><code>flux_variability_analysis</code></a></li><li><a href="../../functions/analysis/#COBREXA.max_min_driving_force-Tuple{MetabolicModel, Dict{String, Float64}, Any}"><code>max_min_driving_force</code></a></li><li><a href="../../functions/analysis/#COBREXA.objective_envelope-Tuple{MetabolicModel, Vector{Int64}, Any}"><code>objective_envelope</code></a></li><li><a href="../../functions/analysis/#COBREXA.screen-Tuple"><code>screen</code></a></li><li><a href="../../functions/analysis/#COBREXA.screen_optmodel_modifications-Tuple"><code>screen_optmodel_modifications</code></a></li></ul><p>Notably, the screening functions are reused to run many other kinds of analyses which, in turn, inherit the parallelizability. This includes a wide range of functionality, including analyses such as:</p><ul><li><a href="../../examples/07_gene_deletion/">single and multiple gene deletions</a> (and other genetic modifications),</li><li><a href="../../examples/07_restricting_reactions/">modifications of the reaction spectrum</a> (e.g., disabling reactions)</li><li>advanced envelope-scanning analyses,</li><li><a href="../../examples/11_growth/">growth media exploration</a> (e.g., metabolite depletion)</li></ul><h2 id="Mitigating-parallel-inefficiencies"><a class="docs-heading-anchor" href="#Mitigating-parallel-inefficiencies">Mitigating parallel inefficiencies</a><a id="Mitigating-parallel-inefficiencies-1"></a><a class="docs-heading-anchor-permalink" href="#Mitigating-parallel-inefficiencies" title="Permalink"></a></h2><p>Ideally, the speedup gained by parallel processing should be proportional to the amount of hardware you add as the workers. You should be aware of factors that reduce the parallel efficiency, which can be summarized as follows:</p><ul><li>Parallelization within single runs of the linear solver is typically not supported (and if it is, it may be inefficient for usual problem sizes). You usually want to parallelize the analyzes that comprise multiple independent runs of the solvers.</li><li>Some analysis function, such as <a href="../../functions/analysis/#COBREXA.flux_variability_analysis-Tuple{MetabolicModel, Any}"><code>flux_variability_analysis</code></a>, have serial parts that can not be parallelized by default. Usually, you may avoid the inefficiency by precomputing the serial analysis parts without involving the cluster of the workers.</li><li>Requirements for frequent worker communication may vastly reduce the efficiency of parallel processing; typically this happens if the time required for individual analysis steps is smaller than the network round-trip-time to the worker processes. Do not use unnecessary parallelization for small tasks.</li><li>Transferring large amounts of data among workers may hamper parallel efficiency. Use <a href="../../concepts/1_screen/">the system of model variants</a> to avoid transferring many similar models to the workers, and <a href="../4_serialized/">model serialization functionality</a> to quickly distribute share large models to the workers.</li></ul><div class="admonition is-info"><header class="admonition-header">Cost of the distribution and parallelization overhead</header><div class="admonition-body"><p>Before allocating extra resources into the distributed execution, always check that your tasks are properly parallelizable and sufficiently large to saturate your computation resources, so that the invested energy is not wasted. <a href="https://en.wikipedia.org/wiki/Amdahl&#39;s_law">Amdahl&#39;s</a> and <a href="https://en.wikipedia.org/wiki/Gustafson%27s_law">Gustafson&#39;s</a> laws can give you a better overview of the sources and consequences of the parallelization inefficiencies and the costs of the resulting overhead.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Contents</a><a class="docs-footer-nextpage" href="../2_parallel/">Local parallel processing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 31 August 2022 11:13">Wednesday 31 August 2022</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
